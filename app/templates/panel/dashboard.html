{% extends 'panel/base.html' %}
{% load staticfiles %}
{% load filters %}

{% block content %}

    <style>
        .small-box .icon {
            font-size: 70px;
        }
    </style>
    {% include 'utils/loading.html' %}
    <div class="row">
        <div class="col-lg-3 col-xs-6" id="corridas_mes">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h4>123</h4>

                    <p>Corridas do Mês</p>
                </div>
                <div class="icon">
                    <i class="fa fa-bank"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6" id="corridas_hoje">
            <!-- small box -->
            <div class="small-box bg-green">
                <div class="inner">
                    <h4>123</h4>

                    <p>Corridas de Hoje</p>
                </div>
                <div class="icon">
                    <i class="fa fa-file-text"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6" id="ganhos_mes">
            <!-- small box -->
            <div class="small-box bg-yellow">
                <div class="inner">
                    <h4>123</h4>

                    <p>Ganhos do Mes</p>
                </div>
                <div class="icon">
                    <i class="fa fa-dollar"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6" id="ganhos_hoje">
            <!-- small box -->
            <div class="small-box bg-red">
                <div class="inner">
                    <h4>123</h4>

                    <p>Ganhos de Hoje</p>
                </div>
                <div class="icon">
                    <i class="fa fa-money"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary" id="novos_pedidos_moto">
                <div class="box-header">
                    <h3 class="box-title">
                        Novos Pedidos
                    </h3>
                </div>
                <div class="box-header">
                    <button class="btn btn-default pull-left" onClick="document.location.reload(true)"><i
                            class="fa fa-refresh"></i> Atualizar
                    </button>
                </div>
                <!-- form start -->
                <div class="box-body">
                    <div class="dataTables_wrapper form-inline dt-bootstrap" id="example1_wrapper">
                        <div class="row">
                            <div id="list" class="col-sm-12">

                            </div>
                        </div>
                    </div>

                </div>
                <!-- /.box-body -->
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            function getList(data) {
                data = data || {};
                $.ajax({
                    url: "{% url 'index' %}",
                    type: "GET", // http method
                    data: data,
                    beforeSend: function () {
                        // $('#loading').show();
                    },
                    success: function (data) {
                        console.log(data);
                    },
                    complete: function () {
                        $('#loading').hide();
                    }
                });
            }

            getList();

            window.setInterval(function () {
                getList();
            }, 300000);

            $('#inicio').addClass('active');

            if (screen.width <= 768) {
                tour = new Tour({
                    name: 'list_pedidos_motorista',
                    backdrop: true,
                    template: "<div class='popover tour'><div class='arrow'></div><h3 class='popover-title'></h3><div class='popover-content'></div><div class='popover-navigation'><button class='btn btn-default' data-role='prev'>« Anterior</button><span data-role='separator'>|</span><button id='prox' class='btn btn-default' data-role='next'>Próximo »</button><button id='fim' class='btn btn-default hidden' data-role='end'>Finalizar</button> </div></div>",
                    steps: [
                        {
                            element: ".navbar",
                            placement: "bottom",
                            title: "Menu Superior",
                            content: "Aqui ficam os botoes de ajuste de tela e de assinatura do sistema."
                        },
                        {
                            element: ".sidebar-toggle",
                            title: "Menu do sistema",
                            content: "Ao clicar neste botão, temos como esconder o menu de ações do sistema.",
                            onShow: function (tour) {
                                var timeOut = setTimeout(function () {
                                    $('.sidebar-toggle').click();
                                    timeOut = setTimeout(function () {
                                        $('.sidebar-toggle').click();
                                    }, 1000);
                                }, 500);

                            }
                        },
                        {
                            element: ".main-sidebar",
                            title: "Menu",
                            content: "Aqui ficam os links de navegação do sistema."
                        },
                        {
                            element: ".checkbox.checbox-switch",
                            title: "Status",
                            placement: "bottom",
                            content: "Neste slider você define seu status para Online ou Offline."
                        },
                        {
                            element: "#ajuda",
                            title: "Central de Ajuda",
                            placement: "top",
                            content: "Se precisar de ajuda, clique aqui e veja um tutorial de como usar as ferramentas da tela."
                        },
                        {
                            element: "#logout",
                            title: "Logout",
                            placement: "top",
                            content: "Clique neste botão para sair do sistema!",
                            onNext: function () {
                                var timeOut = setTimeout(function () {
                                    $('.sidebar-toggle').click();
                                    clearTimeout(timeOut);
                                }, 500);
                            }
                        },
                    ]
                });
            } else {
                tour = new Tour({
                    name: 'list_pedidos_motorista',
                    backdrop: true,
                    template: "<div class='popover tour'><div class='arrow'></div><h3 class='popover-title'></h3><div class='popover-content'></div><div class='popover-navigation'><button class='btn btn-default' data-role='prev'>« Anterior</button><span data-role='separator'>|</span><button id='prox' class='btn btn-default' data-role='next'>Próximo »</button><button id='fim' class='btn btn-default hidden' data-role='end'>Finalizar</button> </div></div>",
                    steps: [
                        {
                            element: "#cred_receber",
                            placement: "bottom",
                            title: "Boas vindas",
                            content: "Seja bem vindo ao sistema da Focus Delivery",
                            onShow: function (tour) {
                                var timeo = setTimeout(function () {
                                    if ($('#body').hasClass('sidebar-open')) {
                                        $('.sidebar-toggle').click();
                                    }
                                    clearTimeout(timeo);
                                })
                            }
                        },
                        {
                            element: ".navbar",
                            placement: "bottom",
                            title: "Menu Superior",
                            content: "Aqui ficam os botoes de ajuste de tela e de assinatura do sistema."
                        },
                        {
                            element: ".sidebar-toggle",
                            title: "Menu do sistema",
                            content: "Ao clicar neste botão, temos como esconder o menu de ações do sistema.",
                            onShow: function (tour) {
                                var timeOut = setTimeout(function () {
                                    $('.sidebar-toggle').click();
                                    timeOut = setTimeout(function () {
                                        $('.sidebar-toggle').click();
                                    }, 1000);
                                }, 500);

                            }
                        },
                        {
                            element: "#ajuda",
                            title: "Central de Ajuda",
                            placement: "top",
                            content: "Se precisar de ajuda, clique aqui e veja um tutorial de como usar as ferramentas da tela."
                        },
                        {
                            element: "#logout",
                            title: "Logout",
                            placement: "top",
                            content: "Clique neste botão para sair do sistema!",
                            onNext: function () {
                                var timeOut = setTimeout(function () {
                                    $('.sidebar-toggle').click();
                                    clearTimeout(timeOut);
                                }, 500);
                            }
                        },
                    ]
                });
            }
        });

    </script>

{% endblock %}